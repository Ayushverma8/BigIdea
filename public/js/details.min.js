!function(){"use strict";var t={init:function(){this.chacheDom(),this.bindEvents()},chacheDom:function(){this.$form=document.querySelector("#order-form"),this.$name=this.$form.name,this.$company=this.$form.company,this.$email=this.$form.email,this.$emailConf=this.$form["email-confirm"],this.$skype=this.$form.skype,this.$msg=this.$form.message,this.$send=this.$form.send},bindEvents:function(){this.$form.addEventListener("blur",this.blurHandler.bind(this),!0),this.$form.addEventListener("input",this.inputHandler.bind(this),!0),this.$form.addEventListener("focus",this.focusHandler.bind(this),!0),this.$form.addEventListener("submit",this.submitValidation.submtValidate.bind(this))},blurHandler:function(t){var e=this.validation.validate.bind(this);e(t),this.letterCounter.isFullOfSpaces(t)},inputHandler:function(t){this.animation.moveLable(t),this.letterCounter.isTextarea(t),this.errorControl.removeError(t),this.autoExpand.isTextarea(t)},focusHandler:function(t){this.autoExpand.isTextarea(t)},validation:{states:{name:!1,company:!0,email:!1,"email-confirm":!1,skype:!0,message:!1},ruleRegx:{textRule:/^[a-zA-Z0-9_-]{3,30}$/,companyRule:/^[a-zA-Z0-9_\s-]{3,30}$/,emailRule:/[a-z0-9!#$%&/'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g},validate:function(t){var e=t.target,i=this.validation;switch(e){case this.$name:i.validateName(e);break;case this.$company:i.validateCompany(e);break;case this.$email:i.validateEmail(e);break;case this.$emailConf:i.confirmEmail(e,this.$email);break;case this.$skype:i.validateSkype(e);break;case this.$msg:i.validateMessage(e)}},validateName:function(t){var e=this.checkEmpty(t),i=this.checkLength(t),s=this.checkTextByRegex(t);return e?i?s?void this.setValid(t):void this.setError(t,"name-regex"):void this.setError(t,"name-short"):void this.setError(t,"empty")},validateCompany:function(e){""!==e.value?this.startCompanyValidation(e):t.errorControl.removeErOrValid(e)},startCompanyValidation:function(t){var e=this.checkEmpty(t),i=this.checkLength(t),s=this.checkCompanyByRegex(t);return e?i?s?void this.setValid(t):void this.setError(t,"company-regex"):void this.setError(t,"company-short"):void this.setError(t,"empty")},validateEmail:function(t){var e=this.checkEmpty(t),i=this.checkEmailByRegex(t);return e?i?void this.setValid(t):void this.setError(t,"mail-regex"):void this.setError(t,"empty")},confirmEmail:function(e,i){var s=this.checkEmpty(e),a=this.matchFields(i,e);return this.checkEmpty(i)?t.validation.states.email===!1?void this.setError(e,"mail-incorrect"):s?a?void this.setValid(e):void this.setError(e,"emails-not-match"):void this.setError(e,"empty"):void this.setError(e,"mail-empty")},validateSkype:function(e){""!==e.value?this.startSkypeValidation(e):t.errorControl.removeErOrValid(e)},startSkypeValidation:function(t){var e=this.checkEmpty(t),i=this.checkLength(t),s=this.checkTextByRegex(t);return e?i?s?void this.setValid(t):void this.setError(t,"skype-regex"):void this.setError(t,"skype-short"):void this.setError(t,"empty")},validateMessage:function(t){var e=this.checkEmpty(t);return e?void this.setValid(t):void this.setError(t,"empty")},matchFields:function(t,e){return t.value===e.value?!0:!1},checkEmpty:function(t){return 0===+t.value?!1:!0},checkEmailByRegex:function(t){var e=t.value,i=e.match(this.ruleRegx.emailRule);return null===i?!1:e!==i[0]?!1:!0},checkTextByRegex:function(t){return this.ruleRegx.textRule.test(t.value)},checkCompanyByRegex:function(t){return this.ruleRegx.companyRule.test(t.value)},setState:function(t,e){var i=t.id;this.states[i]=e},checkLength:function(t){return t.value.length>=3?!0:!1},setError:function(e,i){t.errorControl.showError(e,i),this.setState(e,!1)},setValid:function(e){t.validControl.showValid(e),this.setState(e,!0)}},errorControl:{errors:{empty:"This field have to be filled","name-short":"Name is too short. At least 3 symbols","name-regex":"Name isn't valid.","company-short":"Company name is too short. 3 symbols min","company-regex":"Company name isn't valid.","mail-regex":"Email is written incorrectly.","mail-empty":"Previous email filed is empty","mail-incorrect":"Previous email is incorrectly written","emails-not-match":"Emails aren't match to each other","skype-regex":"Skype-nickname isn't valid.","skype-short":"Skype-nikename is too short. 3 symbols min"},showError:function(t,e){var i=this.isErAlreadyExist(t,e),s=this.getErrorMsg(e);i?(console.log("already exist"),this.changeErMsg(t,s)):(this.setErrorClass(t),this.showMsg(s,t,e))},getErrorMsg:function(t){return this.errors[t]},showMsg:function(t,e,i){var s=this.createErorElem(t,i);e.parentElement.appendChild(s)},setErrorClass:function(t){t.classList.remove("valid"),t.classList.add("error")},createErorElem:function(t,e){var i=document.createElement("p");return i.innerHTML=t,i.className="error-msg",i.setAttribute("data-err",e),i},isErAlreadyExist:function(t,e){var i=this.getErrorElem(t),s=null!==i?!0:!1;return s},changeErMsg:function(t,e){var i=this.getErrorElem(t);i.innerHTML=e},removeErOrValid:function(t){t.classList.remove("error"),t.classList.remove("valid")},removeError:function(t){var e=t.target,i=this.getErrorElem(e);null!==i&&(e.classList.remove("error"),e.parentElement.removeChild(i))},getErrorElem:function(t){var e=t.parentElement,i=e.querySelector(".error-msg");return i}},validControl:{showValid:function(e){var i=t.errorControl.getErrorElem(e);i&&e.parentElement.removeChild(i),e.classList.remove("error"),e.classList.add("valid")}},animation:{moveLable:function(t){var e=t.target,i=this.getClosestLabel(e);""!==e.value?i.classList.add("form-label-small"):i.classList.remove("form-label-small")},getClosestLabel:function(t){var e=t.parentElement,i=e.querySelector(".form-label");return i}},submitValidation:{submtValidate:function(t){this.submitValidation.valName(this.$name),this.submitValidation.valCompany(this.$company),this.submitValidation.valEmail(this.$email),this.submitValidation.confEmail(this.$emailConf,this.$email),this.submitValidation.valSkype(this.$skype),this.submitValidation.valMsg(this.$msg),this.submitValidation.isValid(t)},valName:function(e){t.validation.validateName(e)},valCompany:function(e){t.validation.validateCompany(e)},valEmail:function(e){t.validation.validateEmail(e)},confEmail:function(e,i){t.validation.confirmEmail(e,i)},valSkype:function(e){t.validation.validateSkype(e)},valMsg:function(e){t.validation.validateMessage(e)},isValid:function(e){var i,s=t.validation.states;for(i in s)if(s[i]===!1)return e.preventDefault(),void this.focusInvalidElem(i)},focusInvalidElem:function(t){document.querySelector("#"+t).focus()}},letterCounter:{maxLength:0,cls:"msg-length",msgElem:null,pr:null,state:!0,isTextarea:function(t){var e=t.target;"TEXTAREA"===e.tagName&&(this.state&&this.init(e),this.getMsgLength(e,t))},init:function(t){this.pr=t.parentElement,this.maxLength=t.getAttribute("maxlength"),this.state=!1},getMsgLength:function(t,e){var i=t.value,s=i.length,a=s+"/"+this.maxLength,r=this.isExist();return r&&""===i?void this.removeMsgLength():void(s<=this.maxLength&&this.showMsgLength(t,a,r))},showMsgLength:function(t,e,i){i?this.changeMsgLength(e):(this.createMsgLength(e),this.pr.appendChild(this.msgElem))},createMsgLength:function(t){var e=document.createElement("p");e.innerHTML=t,e.className=this.cls,this.msgElem=e},changeMsgLength:function(t){this.msgElem.innerHTML=t},isExist:function(){var t=null!==this.msgElem?!0:!1;return t},removeMsgLength:function(){this.pr.removeChild(this.msgElem),this.msgElem=null},isFullOfSpaces:function(t){var e=t.target;"TEXTAREA"===e.tagName&&0===+e.value&&this.isExist()&&this.removeMsgLength()}},autoExpand:{baseScrollHeight:0,baseRows:0,state:!0,isTextarea:function(t){var e=t.target;if("TEXTAREA"===e.tagName)if("focus"===t.type){if(!this.state)return;this.init(e)}else"input"===t.type&&this.setNewHeight(e)},init:function(t){this.getBaseScrollHeight(t),this.getBaseRows(t),this.state=!1},getBaseScrollHeight:function(t){this.baseScrollHeight=t.scrollHeight},getBaseRows:function(t){this.baseRows=+t.getAttribute("data-min-rows")},setNewHeight:function(t){var e;t.setAttribute("rows",this.baseRows),e=+Math.ceil((t.scrollHeight-this.baseScrollHeight)/25),t.setAttribute("rows",e+this.baseRows)}}};t.init()}();